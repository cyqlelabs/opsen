# Opsen Load Balancer Client Configuration

# Load balancer server URL
server_url: http://lb.example.com:8080

# Optional: Override endpoint URL
# If not set, will auto-construct from local IP as http://{local_ip}:11000
# Examples:
#   endpoint_url: https://192.168.1.10:11000
#   endpoint_url: http://10.0.0.5:8080
# endpoint_url: ""

# Optional: Multiple endpoints with path-based routing
# Supports exact matches, prefix matching, and wildcards
# Priority: exact match > prefix match > wildcard match
# Longer/more specific patterns always win
# Examples:
#   endpoints:
#     - url: https://backend:11000
#       paths: ["/v1", "/api", "/auth"]          # Prefix: matches /api, /api/users, etc.
#     - url: https://backend:8002
#       paths: ["/monitor/*"]                     # Wildcard: matches /monitor/anything
#     - url: https://backend:9000
#       paths: ["/api/*/users"]                   # Pattern: matches /api/v1/users, /api/v2/users
#     - url: https://backend:7000
#       paths: ["/*"]                             # Catch-all: matches everything else
#
# If neither endpoint_url nor endpoints is set, uses http://{local_ip}:11000
# endpoints: []

# Geolocation configuration (optional)
# By default, the client automatically downloads and uses the GeoIP database
# from Opsen's S3 mirror (no authentication required) to ./GeoLite2-City.mmdb
#
# Option 1: Skip geolocation entirely (fastest, no distance-based routing)
# skip_geolocation: true
#
# Option 2: Use custom GeoIP database path (default: ./GeoLite2-City.mmdb)
# geoip_db_path: /path/to/GeoLite2-City.mmdb
#
# Manual database download/update (optional):
# Run: ./scripts/download-geoip.sh
# This downloads from: https://cyqle-opsen.s3.us-east-2.amazonaws.com/GeoLite2-City.mmdb

# Unique client identifier (auto-generated if not specified)
# client_id: ""

# Hostname override (uses system hostname if not specified)
# hostname: ""

# Time window for averaging metrics in minutes
# Metrics are collected every second and averaged over this window
window_minutes: 15

# Report interval in seconds
# How often to send stats to the server
report_interval_seconds: 60

# Disk path to monitor
# Use "/" for root filesystem or a specific mount point
disk_path: /

# Log level (debug, info, warn, error, fatal)
# Use "debug" to see detailed geolocation and metrics information
log_level: info

# Skip TLS certificate verification (for self-signed certificates in development)
# WARNING: Only use in development! In production, use proper certificates.
# insecure_tls: false

# Server authentication key (must match server's server_key)
# If the server has server_key configured, this MUST match that value
# Leave empty if server has no authentication
# All clients connecting to the same server should use the same server_key
# server_key: ""
#
# Example production setup (must match server configuration):
# server_key: "shared-secret-for-all-clients-change-me"
